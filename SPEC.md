# VibCheck - 기능 요구사항 명세서

## 프로젝트 개요

**VibCheck**은 비개발자 출신 바이브 코더를 위한 아이디어 검증 앱입니다.

"이거 내가 만들 수 있어?"라는 질문에 답하는 것이 핵심 가치입니다.
아이디어를 입력하면 GitHub·웹 검색·AI 분석을 통해 **구현 가능성 중심**의 검증 리포트를 제공하고,
후속 채팅으로 아이디어를 발전시킬 수 있습니다.

## 타겟 사용자

코딩 경험 없이 AI 도구를 활용해 제품을 만드는 **비개발자 출신 바이브 코더**

## 핵심 문제

| 문제 | 설명 |
|------|------|
| 가능 여부 판단 불가 | 기술 배경이 없어 아이디어가 구현 가능한지 판단 자체가 안 됨 |
| 벽에 부딪혀도 원인 모름 | AI에게 시켜봤는데 안 될 때, 기술적 한계인지 프롬프트 문제인지 구분 불가 |
| 시작점을 모름 | 가능하다 해도 어떤 기술/도구/API가 필요한지 모름 |
| 바퀴의 재발명 | 이미 좋은 오픈소스가 있는데 처음부터 만듦 — fork/contribute가 나을 수 있음 |
| 시간 낭비 | 불가능한 것에 며칠째 AI와 씨름 |

## 사용자 플로우

```
아이디어 입력 → [사전 심사] → 멀티소스 검색/분석 → 검증 리포트(스트리밍) → 채팅으로 심화 탐색
                    │
                    └─ IMPOSSIBLE → 단축 리포트 (검색 생략)
```

---

## 기능 요구사항

### FR-1. 아이디어 입력 ✅

- 자연어로 아이디어를 자유롭게 입력할 수 있다
- 예시: "인스타그램 사진을 자동으로 분석해서 해시태그 추천해주는 앱"
- 입력 후 검증을 시작한다

### FR-2. 멀티소스 데이터 수집 ✅

#### FR-2.0 사전 심사 (Phase 0)
- 키워드 추출 시 아이디어를 `SEARCHABLE` / `IMPOSSIBLE` / `AMBIGUOUS`로 분류한다
- `IMPOSSIBLE` 판정 시 검색을 생략하고 단축 리포트를 즉시 생성한다 (비용 절감)
- 복잡도(`LOW` ~ `VERY_HIGH`)와 데이터 의존성(`AVAILABLE_FREE` / `AVAILABLE_PAID` / `BUILDABLE` / `UNAVAILABLE`)을 함께 평가한다
- 플랫폼 종속 리스크를 평가한다 (`NONE` / `OPEN` / `REVIEW_REQUIRED` / `ENTERPRISE_ONLY` / `DEPRECATED`)
- 법적/규제 리스크를 평가한다 (`NONE` / `CAUTION` / `HIGH_RISK`, 카테고리: 개인정보/저작권/초상권/약관위반/기타)

#### FR-2.1 GitHub 검색
- GitHub REST API로 유사 레포지토리를 검색한다
- 2단 검색 전략: 1단(stars:>=10) → 부족 시 2단(stars:>=1)으로 니치 분야 커버리지 확보
- 영어 쿼리(3~5개)에 더해 한국어 쿼리(1~2개)를 병렬 검색하여 한국어 오픈소스 프로젝트도 발견한다
- 레포별 스타 수, 최근 활동, 주요 언어/기술 스택, README 요약을 수집한다
- 생태계 성숙도 신호를 분류한다: `ESTABLISHED` / `EMERGING` / `NOVEL` / `UNKNOWN`(검색 장애)

#### FR-2.2 웹 검색
- Tavily Search API로 관련 제품, 기사, 트렌드를 검색한다
- 시장 동향과 경쟁 서비스 정보를 수집한다
- 한국어 검색 쿼리를 추가하여 한국 블로그(tistory, velog), 커뮤니티(okky, disquiet), 서비스 정보도 수집한다

#### FR-2.3 결과 랭킹
- 생태계 신호별 적응형 가중치로 검색 결과를 정렬한다
- ESTABLISHED 신호에서는 관련성(descMatch 30%) > 스타(15%)로 "인기"보다 "관련성" 우선 랭킹
- EMERGING 신호에서는 스타 대신 최신성·커밋 빈도에 가중치를 부여한다
- README 길이·topics 개수를 연속 스코어로 평가하여 소규모 프로젝트의 체계적 불이익을 해소
- `UNKNOWN` 신호(검색 장애)는 `NOVEL`(새로운 아이디어)과 명확히 구분하여, LLM이 "검색 결과 없음"을 "유사 프로젝트 부재"로 오해하지 않도록 한다

### FR-3. 검증 리포트 생성 ✅

Anthropic Claude API(`claude-sonnet-4-5-20250929`)로 수집 데이터를 기반으로 리포트를 생성한다.
SSE 스트리밍으로 실시간 출력하며, 섹션별 카드 UI로 구조화하여 표시한다.

#### FR-3.1 구현 가능성 판정 (최우선 섹션)

**판정 등급 (VerdictBadge로 시각화):**
- **바이브코딩으로 가능** — AI 도구와 함께 비개발자 혼자 만들 수 있음
- **조건부 가능** — 특정 조건(유료 API, 일부 기술 학습 등)이 충족되면 가능
- **개발자 도움 필요** — 핵심 기능 중 전문 개발 지식이 필요한 부분 존재
- **현재 기술로 어려움** — 기술적 한계 또는 극도로 높은 복잡도

**리스크 기반 판정 오버라이드:**
- 플랫폼 리스크 `REVIEW_REQUIRED` → 최소 "조건부 가능"
- 플랫폼 리스크 `ENTERPRISE_ONLY` / `DEPRECATED` → 최소 "현재 기술로 어려움"
- 법적 리스크 `CAUTION` → 판정 유지 + "법적 주의사항" 섹션 추가
- 법적 리스크 `HIGH_RISK` → 최소 "조건부 가능" + "법적 경고" 섹션을 판정 바로 아래 배치

**상세 내용:**
- 판정 이유 (명확하고 비개발자가 이해할 수 있는 언어로)
- 확신도 (0.0~1.0, 검색 결과 수·시그널·복잡도·리스크 기반 구조화된 산출 기준에 따라 설정)
- 필요한 기술 스택, API, 도구 목록 (기술 용어에 쉬운 설명 병기)
- 단계별 구현 로드맵 (비개발자 눈높이)

#### FR-3.2 유사 프로젝트 & Make or Fork 판단

**Build / Fork / Contribute 추천:**
- **Build** — 유사 프로젝트가 없거나 맞지 않아 직접 만드는 게 나음
- **Fork** — 이 프로젝트를 가져다 커스텀하면 빠르게 만들 수 있음
- **Contribute** — 이미 좋은 프로젝트가 있으니 여기에 기여하는 게 나음

**상세 내용:**
- 유사 프로젝트 테이블 (이름, 스타, 기술스택, 추천)
- 링크 제공으로 직접 확인 가능

#### FR-3.3 시장/트렌드 요약 (간략)
- 수요 시그널 (관련 기사, 제품 존재 여부)
- 한 줄 시장 동향 요약

### FR-4. 후속 채팅 ✅

- 리포트 생성 완료 후 채팅 인터페이스가 자동으로 표시된다
- **추천 질문 칩 4개**를 제공한다 (첫 메시지 전에만 표시):
  - "로드맵을 더 자세히 알려주세요"
  - "더 쉬운 방법은 없나요?"
  - "범위를 줄이면 어떻게 될까요?"
  - "비용은 얼마나 들까요?"
- 리포트 내용과 검색 컨텍스트를 시스템 프롬프트에 주입하여 맥락을 유지한다
- 자유 텍스트 입력으로 추가 질문이 가능하다
- 스트리밍 응답 (마크다운 렌더링)

### FR-5. 랜딩/입력 페이지 ✅

- 서비스 소개 + 아이디어 입력 폼
- **예시 아이디어 칩 4개** 제공 (클릭 시 입력폼에 자동 채움):
  - "인스타 사진 분석해서 해시태그 추천하는 앱"
  - "유튜브 영상 자동 요약 크롬 확장"
  - "동네 맛집 리뷰 모아주는 서비스"
  - "반려식물 건강 사진 진단 앱"
- 3단계 안내 표시 (아이디어 입력 → 검색/분석 → 결과 제공)
- 간결하고 직관적인 디자인, 비개발자가 편안하게 느낄 수 있는 톤

### FR-6. 새 아이디어 검증 ✅

- 채팅 중 언제든 새로운 아이디어로 검증을 다시 시작할 수 있다
- 리포트/채팅 화면에서 "새 아이디어 검증하기" 버튼을 제공한다
- 헤더의 "새 아이디어" 링크로도 접근 가능하다
- 클릭 시 랜딩 입력 화면으로 돌아간다

### FR-7. 리포트 공유 ⏳ (미구현)

- 검증 리포트를 고유 URL로 공유할 수 있다
- 공유 링크로 접속하면 리포트를 읽기 전용으로 볼 수 있다
- 공유 받은 사람도 같은 아이디어로 새 검증을 시작할 수 있다

> **현재 상태**: 미구현. 리포트는 로컬스토리지에만 저장되며 브라우저 간 공유 불가.

### FR-8. 검증 히스토리 ✅

- 이전에 검증한 아이디어 목록을 로컬스토리지(`vibcheck-history`)에 저장한다
- 최대 20건까지 저장하며, 초과 시 오래된 항목부터 삭제한다
- 랜딩 페이지 하단에 최근 5건의 이전 검증 기록을 표시한다
- 기록 클릭 시 리포트를 다시 열 수 있다 (`/check?history={id}`)
- 히스토리에서 열 때는 검색/분석 없이 저장된 리포트를 즉시 표시한다
- 로그인 없이 브라우저 단위로 관리한다

### FR-11. 결과 다운로드 (JSON / MD) ✅

- 분석 완료 후 검증 결과를 JSON 또는 Markdown 파일로 다운로드할 수 있다
- 히스토리에서 불러온 결과에서도 동일하게 다운로드할 수 있다
- 액션 버튼 영역("새 아이디어 검증하기" 옆)에 다운로드 버튼 2개를 제공한다

**JSON 다운로드:**
- 아이디어, 판정, 확신도, 섹션 배열, 검색 컨텍스트, 분석 일시를 포함한 구조화된 JSON
- 파일명: `vibcheck-결과-YYYYMMDD.json`

**Markdown 다운로드:**
- 아이디어와 분석 일시를 헤더로, 원본 리포트 마크다운을 본문으로 포함
- 파일명: `vibcheck-결과-YYYYMMDD.md`

### FR-9. 다크/라이트 모드 ✅

- 다크 모드를 기본으로 제공한다
- 헤더의 해/달 아이콘 토글로 전환 가능하다
- 시스템 설정을 자동 감지하여 초기 모드를 설정한다
- 선택한 테마를 로컬스토리지(`vibcheck-theme`)에 저장하여 유지한다

### FR-10. 분석 진행 상황 표시 ✅

- 분석 파이프라인의 각 단계를 실시간으로 표시한다:
  1. 아이디어 분석 중 (키워드 추출 + 사전 심사)
  2. GitHub에서 유사 프로젝트 찾는 중
  3. 웹에서 시장 정보 수집 중
  4. 검색 결과 정리 중
  5. AI 리포트 생성 중
- 각 단계는 `대기` → `진행 중(스피너)` → `완료(체크)` 또는 `에러` 상태를 표시한다
- 단계별 상세 정보를 인라인으로 표시한다 (예: "10개 프로젝트 발견 (ESTABLISHED)")
- **퍼센트 진행바**: 스텝별 가중치 기반(keywords:10, github:30, tavily:30, ranking:15, report:15) 퍼센트를 상단에 표시한다
- **리포트 스켈레톤**: 분석 진행 중 리포트 스트리밍 시작 전까지 스켈레톤 플레이스홀더를 표시한다

---

## 비기능 요구사항

### NFR-1. 성능
- 리포트 및 채팅 응답은 SSE 스트리밍으로 제공
- GitHub/Tavily 검색은 `Promise.allSettled`로 병렬 수행
- IMPOSSIBLE 아이디어는 검색 생략으로 응답 시간 단축
- 외부 API 호출에 타임아웃(10초) 및 지수 백오프 재시도(최대 3회)를 적용한다
- 채팅 시스템 프롬프트에 Anthropic prompt caching(`ephemeral`)을 적용하여 반복 호출 비용을 절감한다
- 채팅 메시지를 최근 10개(≈5 라운드트립)로 슬라이딩 윈도우 적용하여 토큰 사용량을 제어한다

### NFR-2. LLM 프로바이더
- Anthropic Claude API 직접 호출 (`@ai-sdk/anthropic`)
- 경량 작업(키워드 추출): `claude-haiku-4-5-20251001`
- 일반 작업(리포트/채팅): `claude-sonnet-4-5-20250929`
- 고복잡도 리포트(`VERY_HIGH`): `claude-opus-4-6` — 복잡 아이디어 분석 품질 향상

### NFR-3. 배포
- Vercel (프론트엔드 + API Routes)

### NFR-4. 반응형
- 모바일/데스크탑 대응

### NFR-5. 접근성
- 비개발자 친화적 용어 사용 (기술 용어는 쉬운 설명 병기)
- 마크다운 리포트 렌더링 (GFM 테이블, 목록, 코드 블록 지원)
